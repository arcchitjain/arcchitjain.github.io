<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title> | SafeLearner</title>
  <meta name="description" content="PhD researcher in the DTAI research group at KU Leuven, Belgium.
">

  <link rel="shortcut icon" href="https://people.cs.kuleuven.be/~arcchit.jain//assets/img/favicon.ico">

  <link rel="stylesheet" href="https://people.cs.kuleuven.be/~arcchit.jain//assets/css/main.css">
  <link rel="canonical" href="https://people.cs.kuleuven.be/~arcchit.jain//arcchit.jain/projects/safelearner/">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    
    
    <span class="site-title">
        <a class="page-link" href="https://people.cs.kuleuven.be/~arcchit.jain/"> <img src="https://people.cs.kuleuven.be/~arcchit.jain/assets/img/favicon.ico" style="vertical-align:middle" alt="Logo" height="32px" width="32px"> <strong>Arcchit</strong> Jain</a>
    </span>
    

    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
            <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
            <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
          </svg>
        </span>
      </label>

      <div class="trigger">
        <!-- About -->
        <a class="page-link" href="https://people.cs.kuleuven.be/~arcchit.jain//">About</a>
        <!-- Publications -->
        <a class="page-link" href="https://scholar.google.com/citations?user=Yk3sqsQAAAAJ" target="_blank">Publications</a>
        <!-- Projects -->
        <a class="page-link" href="https://people.cs.kuleuven.be/~arcchit.jain/projects/">Projects</a>
        <!-- Pages -->
        
          
        
          
        
          
        
          
            <a class="page-link" href="https://people.cs.kuleuven.be/~arcchit.jain//past/">Past</a>
          
        
          
            <a class="page-link" href="https://people.cs.kuleuven.be/~arcchit.jain//teaching/">Teaching</a>
          
        
          
        

        <!-- CV link -->
        <a class="page-link" href="https://people.cs.kuleuven.be/~arcchit.jain/assets/pdf/CV_v7.pdf">CV</a>

      </div>
    </nav>

  </div>

</header>



    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">SafeLearner</h1>
    <h5 class="post-description">SafeLearner is based on the work, titled as Scalable Rule Learning in Probabilistic Knowledge Bases, by Arcchit Jain, Tal Fredman, Ondrej Kuzelka, Guy Van den Broeck, and Luc De Raedt. The work was accepted and published in the 1st Conference on Automated Knowledge Base Construction (AKBC) 2019 and held at the University of Massachusetts from 20 - 22 May 2019. It's code can be found at <a href="https://github.com/arcchitjain/SafeLearner/tree/AKBC19">https://github.com/arcchitjain/SafeLearner</a>.</h5>
  </header>

  <article class="post-content SafeLearner clearfix">
    <div class="img_row">
    <img class="col one left" src="https://people.cs.kuleuven.be/~arcchit.jain/assets/img/akbc_logo_crop.png" alt="" title="AKBC Logo" />
    <img class="col two left" src="https://people.cs.kuleuven.be/~arcchit.jain/assets/img/Podium_Pic_UMass.jpeg" alt="" title="Presenting SafeLearner at AKBC19" />
</div>

<h2 id="motivation">Motivation</h2>

<p style="text-align: justify">Knowledge Bases (KBs) are becoming increasingly large, sparse and probabilistic. These KBs are typically used to perform query inferences and rule mining. But their efficacy is only as high as their completeness. Efficiently utilizing incomplete KBs remains a major challenge as the current KB completion techniques either do not take into account the inherent uncertainty associated with each KB tuple or do not scale to large KBs.</p>

<p style="text-align: justify">Probabilistic rule learning not only considers the probability of every KB tuple but also tackles the problem of KB completion in an explainable way. For any given probabilistic KB, it learns probabilistic first-order rules from its relations to identify interesting patterns. But, the current probabilistic rule learning techniques perform grounding to do probabilistic inference for evaluation of candidate rules. It does not scale well to large KBs as the time complexity of inference using grounding is exponential over the size of the KB. In this paper, we present SafeLearner - a scalable solution to probabilistic KB completion that performs probabilistic rule learning using lifted probabilistic inference - as faster approach instead of grounding.</p>

<h2 id="impact">Impact</h2>

<p style="text-align: justify">We proposed a probabilistic rule learning system, named SafeLearner, that supports lifted inference. It first performs structure learning by mining independent deterministic candidate rules using AMIE+ and later executes joint parameter learning over all the rule probabilities. SafeLearner extends ProbFOIL+ by using lifted probabilistic inference (instead of using grounding). Therefore, it scales better than ProbFOIL+. In comparison with AMIE+, it is able to jointly learn probabilistic rules over a probabilistic KB unlike AMIE+ which only learns independent deterministic rules (with confidences) over a deterministic KB. We experimentally show that SafeLearner scales as good as AMIE+ when learning simple rules. Trying to learn complex rules leads to unsafe queries which are not suitable for lifted inference. But lifted inference helps SafeLearner in outperforming ProbFOIL+ which does not scale to NELL Sports Database without the help of a declarative bias.</p>

<h2 id="documentation">Documentation</h2>

<p>This is a documentation on how to install and use the codes of <strong><a href="https://github.com/arcchitjain/SafeLearner/tree/AKBC19">SafeLearner</a></strong>.
It is licensed under <a href="https://github.com/arcchitjain/SafeLearner/blob/master/LICENSE">Apache-2.0 license</a>.</p>

<h3 id="dependencies">Dependencies</h3>
<ul>
  <li>Python 3.6</li>
  <li>PostgreSQL (version &gt; 9.1)</li>
  <li>Java</li>
</ul>

<h3 id="installation">Installation</h3>
<h4 id="use-pipenv--to-install-the-following-required-python-packages">Use <em>pipenv</em>  to install the following required python packages</h4>
<ol>
  <li>Install <em>pipenv</em> first, if not already installed:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install pipenv
</code></pre></div>    </div>
  </li>
  <li>Clone this repository to your local machine
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone -b AKBC19 --single-branch https://github.com/arcchitjain/SafeLearner.git
</code></pre></div>    </div>
  </li>
  <li>Move to this repository and install all the required packages:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pipenv install
</code></pre></div>    </div>
    <p>This should install the following packages in a virtual environment of Python 3.6 for you:</p>
    <ul>
      <li><em>ad</em></li>
      <li><em>nltk</em></li>
      <li><em>problog</em></li>
      <li><em>psycopg2</em></li>
      <li><em>sqlparse</em></li>
      <li><em>sympy</em></li>
    </ul>
  </li>
  <li>Now, to activate the virtual environment, run the following:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pipenv shell
</code></pre></div>    </div>
  </li>
  <li>Steps to install <em>Prover9</em> - Python module for <em>nltk</em> <br />
<em>Prover9</em> is a non-standard package which gets installed by the following steps:
    <ol>
      <li>Download  LADR-2009-11A.tar.gz from <a href="https://www.cs.unm.edu/~mccune/prover9/download/">https://www.cs.unm.edu/~mccune/prover9/download/</a></li>
      <li>Extract its files and run ‘make all’</li>
      <li>Copy all the files created in ‘bin’ folder to any of the following locations:
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> /usr/local/bin/prover9 
 /usr/local/bin/prover9/bin
 /usr/local/bin
 /usr/bin
 /usr/local/prover9
 /usr/local/share/prover9
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
</ol>

<h3 id="input-parameters">Input Parameters</h3>

<p><strong>SafeLearner</strong> supports many variations of its main algorithm:</p>

<table>
  <thead>
    <tr>
      <th>Argument</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">file</code></td>
      <td>Input file with location (Required Argument)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-t</code></td>
      <td>Target predicate with arity (Eg: -t “coauthor/2”)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-l</code></td>
      <td>Maximum rule length; Maximum number of total literals in a rule (including head)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">--log</code></td>
      <td>Logger file with location</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-v</code></td>
      <td>Verbosity level of the log (Use -v -v -v for full verbosity)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-s</code></td>
      <td>Specify scoring/loss function for SGD (Default: “cross_entropy”, Other options: “accuracy”, “squared_loss”)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">--lr</code></td>
      <td>Specify earning rate parameter of SGD</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-i</code></td>
      <td>Specify number of iterations of SGD</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-c</code></td>
      <td>Cost of misclassification for negative examples (Default: 1.0)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-q</code></td>
      <td>Input -q to denote an input file with facts enclosed in double quotes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">--minpca</code></td>
      <td>Minimum PCA Confidence Threshold for <em>Amie+</em></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">--minhc</code></td>
      <td>Minimum Standard Confidence Threshold for <em>Amie+</em></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-r</code></td>
      <td>Allow recursive rules to be learned</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-a</code></td>
      <td>Specify maximum number of <em>Amie+</em> to be considered as candidate rules</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-d</code></td>
      <td>Disable/ignore typing of predicates while pruning <em>Amie+</em> rules</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">--db_name</code></td>
      <td>Specify the name of the database to be used</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">--db_user</code></td>
      <td>Specify the username that can access the database</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">--db_pass</code></td>
      <td>Specify the password to access the database</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">--db_localhost</code></td>
      <td>Specify the localhost to can access the database</td>
    </tr>
  </tbody>
</table>

<h3 id="example">Example</h3>

<p>You need to create a PostgreSQL Database first before running <strong>SafeLearner</strong>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>psql
CREATE DATABASE test_dbname;
\q
</code></pre></div></div>
<p>This creates an empty database in <em>psql</em> server on your machine.  Now, in the following command,  replace ‘test_dbuser’ with the username of your <em>psql</em> server and add password and localhost name if required.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 safelearner.py Data/Test-Coauthor/illustrative_example.pl --log test.log -v -v -v -i 10000 --lr 0.00001 --minpca 0.00001 --minhc 0.00001 --db_name test_dbname --db_user test_dbuser
</code></pre></div></div>
<p>Running this command will execute <strong>SafeLearner</strong> on a small toy dataset and would ensure that it had got installed correctly.</p>

<h2 id="acknowledgements">Acknowledgements</h2>

<p>The authors express their sincere regards to Anton Dries and Sebastijan Dumancic for their invaluable input, and the reviewers for their useful suggestions. This work has received funding from the European Research Council under the European Union’s Horizon 2020 research and innovation programme (#694980 SYNTH: Synthesising Inductive Data Models), from the various grants of Research Foundation - Flanders, NSF grants #IIS-1657613, #IIS-1633857, #CCF-1837129, NEC Research, and a gift from Intel.</p>

  </article>

  

  

</div>

      </div>
    </div>

    <footer>

  <div class="wrapper">
    <a href="https://goo.gl/maps/N76admgskUNxN6rh7" target="_blank">Departement Computerwetenschappen</a>, Celestijnenlaan 200A, 3001 Leuven, Belgium <br> Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme.

    
        Last updated: 11 July 2020.
    
    &copy; Copyright 2020 Arcchit Jain.
  </div>

</footer>


    <!-- Load jQuery -->
<script src="//code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Load Common JS -->
<script src="https://people.cs.kuleuven.be/~arcchit.jain//assets/js/common.js"></script>





<!-- Include custom icon fonts -->
<link rel="stylesheet" href="https://people.cs.kuleuven.be/~arcchit.jain//assets/css/fontawesome-all.min.css">
<link rel="stylesheet" href="https://people.cs.kuleuven.be/~arcchit.jain//assets/css/academicons.min.css">

<!-- Google Analytics -->

<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-170232003-1', 'auto');
	ga('send', 'pageview');
</script>


  </body>

</html>
